<head>
<title>TP3: Métamorphose de visages</title>
<!-- Ceci est un commentaire -->
<!-- La ligne ci-dessous vous permettra d'écrire votre texte avec des accents français -->
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body>
  <h1>TP3: Métamorphose de visages</h1>

  <h2>Partie 1: Métamorphose de mon visage</h2>

  <p>Dans cette première partie il fallait avoir développer une fonctione permettant de faire la métamorphose entre deux images.
  Pour tester cette fonction il fallait prendre une photo de notre visage et la morpher avec celle d'un autre étudiant.
  Pour y parvenir et afin d'alléger le code de la fonction principale le code a été divisé en différente fonction.
  L'une de ces fonctions est celle permettant de calculer la matrice de transformation affine. Ainsi, dans cette fonction
  il suffit de donner en paramètre le point de départ et le point de destination que l'on veut atteindre dans notre image.
    Pour obtenir le point d'arrivé on prenait l'un des sommets du triangle courant et on faisait la moyenne entre celui
    de l'image de départ et celui d'arrivé selon le paramètre warp_frac. Finalement, il fallait également donner le triangle
    de l'itération courante dans la boucle principale de la fonction morph pour être en mesure d'aller chercher les points
    correspondant sur chaque image. D'autre part, une fonction getPoints prennant en paramètre le triangle destination de
  l'itération courant. Ainsi, dans cette fonction on se retrouve à calculer les max et min des coordonnées de sommets du triangle
  pour en tirer une hauteur et largeur. Ensuite, un mask était créé permettant d'aller chercher seulement les points du
  triangles affecté par la transformation affine courante. Une fois ces points récupérer dans un array
  de 2 colonnes, il est possible d'aller appliquer la transformation affine inverse sur chaqu'un de ceux-ci selon l'équation
  ax1 + by1 + c = x1' dans la boucle principale de morph. Finalement, on va aplique ces valeurs pour chaque pixel de chaque
  cannaux de l'image de base et destination avec la fonction RectBivariateSpline.ev. Et on retourne l'image
  final en s'assurant de composé les deux images en y appliquant leur fondu de couleur selon le paramètre
  dissolve_frac. </p>
  <video width="360" height="360" controls>
    <source src="https://github.com/TonyDall/Photo_Algo/raw/main/tp3/remise/deforme.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>  <video width="360" height="360" controls>
    <source src="https://github.com/TonyDall/Photo_Algo/raw/main/tp3/remise/trace.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
    <p>Ici, les résultats présentés sont une reproduction aussi fidèle que possible de quelques problèmes rencontrés lors
      des premiers rendus. Ce terme "reproduction" est utilisé car il a été constaté après l'obtention d'un résultat
      satisfaisant qu'il était nécessaire de démontrer les sources de problèmes avec des exemples. Ainsi, dans le résultat
      de gauche, il a été remarqué qu'à la suite de la génération de la première image à la fin de l'itération totale de
      la fonction morph, on semblait remarquer la présence de triangles et de lignes un peu partout sur l'image originale.
      Certaines sections semblaient avoir bougé correctement, tandis que d'autres montraient encore l'original. Pour
      corriger ce problème, il suffisait de faire une copie de l'image originale sur laquelle on viendrait seulement
      "coller" les résultats finaux. En effet, dans la boucle, on utilise l'image originale, donc à chaque itération,
      on se retrouvait avec une image de plus en plus différente, ce qui produisait un résultat indésirable. Une fois
      ce problème corrigé, le résultat de droite a été obtenu. Ainsi, on observe sur tout le tour du visage les traces
      de nos itérations. Pour corriger cela, il a suffi de suivre les conseils et d'ajouter dans l'array de points des
      images des coordonnées pour les 4 coins de l'image.</p>

 <h4>Résultat final obtenue</h4>
  <video width="720" height="720" controls>
    <source src="https://github.com/TonyDall/Photo_Algo/raw/main/tp3/remise/rendu1.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <h2>Partie 2: Métamorphose d'animal </h2>
    <video width="720" height="720" controls>
    <source src="https://github.com/TonyDall/Photo_Algo/raw/main/tp3/remise/rendu2.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <p>Le résultat obtenue est très satisfaisant. D'autant plus que le nombre de points utilisé pour faire la triangulation
  était moindre que sur les visages humains. Ainsi, il est possible d'observer les points de références utilisé pour la
  triangulation dans l'image ci-dessous:</p>

  <h4>Image des points sur le renard</h4>
  <img src="https://github.com/TonyDall/Photo_Algo/blob/main/tp3/remise/pts_renard.png?raw=true" alt="Image 6" width="720" height="720">


  <h2>Partie 3: Métamorphose avec photo personnel</h2>
  <video width="720" height="720" controls>
    <source src="https://github.com/TonyDall/Photo_Algo/raw/main/tp3/remise/rendu3.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <p>Cette métamorphose représente le résultat le moins bien réussi parmi les différents. En effet, lors de la transition
  on remarque toujours la présence de la sphère d'un image à l'autre. Ceci s'explique probablement du fait que l'on a
  une image avec un contour bien définie (la boule) et l'autre avec un coutour beaucoup moins bien définie du fait
  de la présence de multiple feuilles de la plante. Par conséquent, même si les deux objets semblait avoir une forme
  assez sphérique on obtenait une résultat qui n'était pas des plus fluides. Dans les images qui suit, on peut voir
  les différents points pris le tours des deux objets:</p>

  <h4>Points utilisé sur les deux images personnels</h4>
  <img src="https://github.com/TonyDall/Photo_Algo/blob/main/tp3/remise/pts_plante.png?raw=true" alt="Image 6" width="360" height="360">
  <img src="https://github.com/TonyDall/Photo_Algo/blob/main/tp3/remise/pts_sphere.png?raw=true" alt="Image 6" width="360" height="360">

  <h4>Métamorphose d'une tranche de pain en toast au beurre de peanut</h4>
  <video width="720" height="720" controls>
    <source src="https://github.com/TonyDall/Photo_Algo/raw/main/tp3/remise/rendu4.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <p> Ici, le but était de prendre un aliments avant sa transformation pour observer un résultat des plus fluide
  possible. Ainsi, les points pris sont au même endroit sur la tranche de pains dans les deux images.</p>



  <p>Anthony Dallaire <br> Université Laval<br>28 Février 2024</p>

</body>